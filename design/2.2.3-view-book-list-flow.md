# 2.2.3 View Book List Flow

## Feature: View Book List
**Actor:** All Users (Public, no login required)  
**Dependencies:** None

## Flowchart

```mermaid
flowchart TD
    Start([User visits book list page]) --> LoadBooks[Load books from database]
    LoadBooks --> DisplayBooks[Display books with:<br/>- Title<br/>- Author<br/>- Publish Year<br/>- Category<br/>- Available Quantity<br/>- Borrowed Quantity]
    
    DisplayBooks --> ApplyPagination[Apply pagination<br/>10 books per page]
    ApplyPagination --> ShowPage[Show current page]
    
    ShowPage --> UserAction{User action?}
    
    UserAction -->|Search| EnterSearch[Enter search term<br/>title or author]
    UserAction -->|Filter| SelectCategory[Select category filter]
    UserAction -->|Sort| SelectSort[Select sort option]
    UserAction -->|Change Page| ClickPage[Click page number]
    UserAction -->|View Details| ClickBook[Click on book]
    
    EnterSearch --> FilterSearch[Filter books by search term]
    FilterSearch --> UpdateDisplay[Update displayed list]
    UpdateDisplay --> ShowPage
    
    SelectCategory --> FilterCategory[Filter books by category]
    FilterCategory --> UpdateDisplay
    
    SelectSort --> ApplySort{Sort option?}
    
    ApplySort -->|Title A-Z| SortTitle[Sort by title A-Z]
    ApplySort -->|Publish Year| SortYear[Sort by publish year newest]
    ApplySort -->|Borrow Count| SortBorrow[Sort by borrow count popular]
    
    SortTitle --> UpdateDisplay
    SortYear --> UpdateDisplay
    SortBorrow --> UpdateDisplay
    
    ClickPage --> LoadPage[Load selected page]
    LoadPage --> ShowPage
    
    ClickBook --> NavigateDetails[Navigate to book details]
    NavigateDetails --> BookDetails([Book Details Page])
    
    EnterSearch --> ClearSearch[Clear search]
    ClearSearch --> ResetFilters[Reset to all books]
    ResetFilters --> UpdateDisplay
    
    SelectCategory --> ClearFilter[Clear filter]
    ClearFilter --> ResetFilters
    
    LoadBooks --> CheckData{Books found?}
    
    CheckData -->|No| ShowEmpty[Show 'Không tìm thấy sách']
    CheckData -->|Yes| DisplayBooks
    
    FilterSearch --> CheckResults{Results found?}
    CheckResults -->|No| ShowEmpty
    CheckResults -->|Yes| UpdateDisplay
    
    LoadBooks --> ErrorNetwork{Network error?}
    ErrorNetwork -->|Yes| ShowError[Show error message, allow retry]
    ShowError --> LoadBooks
    ErrorNetwork -->|No| DisplayBooks
    
    style Start fill:#e1f5ff
    style BookDetails fill:#c8e6c9
    style ShowPage fill:#c8e6c9
    style ShowEmpty fill:#fff9c4
    style ShowError fill:#ffcdd2
```

## Features
- **Search:** By book title or author
- **Filter:** By category
- **Sort:** Title (A-Z), Publish Year (Newest), Borrow Count (Most Popular)
- **Pagination:** 10 books per page

## Error Cases
- No books found
- Network error
- Invalid page number

